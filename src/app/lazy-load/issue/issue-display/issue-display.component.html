<hr>

<div class="text-center" *ngIf="issueDetails.length === 0">
  <img src="assets/images/progress.gif" />
</div>

<div class="container" *ngIf="issueDetails.length !== 0">

  <h3 class="text-green"> {{issue.title}}</h3>

  <hr>

  <div *ngFor="let item of issueDetails; let row = index">
    <div class="card card-red" id="{{item.issueDetailId}}">
      <div class="card-header">
        <h3 class="text-blue">{{row+ 1}}-&nbsp;{{item.caption}}</h3>
      </div>
      <div class="card-body">
        <div class="box-answer" [innerHTML]="item.text"></div>
        <hr>
        <ngx-gallery *ngIf="item.issueDetailAttachments.length !== 0" class="gallery-custom" [options]="galleryOptions"
          [images]="loadImage(item.issueDetailId)">
        </ngx-gallery>
      </div>
      <div class="card-footer">

        <div class="form-group">
          <button *ngFor="let attach of item.equipmentAttachmentViewModels" type="button"
            ngbTooltip="{{attach.description}}" class="btn btn-sm btn-tool mr-2" placement="top" [ngClass]="{'btn-warning': attach.equipmentAttachmentType === 1,
                  'btn-info': attach.equipmentAttachmentType === 2,
                  'btn-primary': attach.equipmentAttachmentType === 3 }" (click)="downloadFile(attach)">
            {{attach.equipmentAttachmentName}}
          </button>
        </div>

        <hr>

        <div class="comment-box" *ngFor="let cmt of item.issueDetailComments">
          <a class="btn-link">{{cmt.userName}}</a>: <label>{{cmt.comment}}</label>
        </div>

        <div class="form-group">
          <input #input type="text" class="form-control comment-input" placeholder="{{'Issue.AddComment'| translate}}"
            (keydown.Enter)="addComment(item.issueDetailId,input)">
        </div>
      </div>
    </div>
    <hr>
  </div>
  <button type="button" class="btn btn-success btn-wide"
    (click)="addAnswer()">{{'Issue.YourAnswer'| translate}}</button>
  <hr>
</div>
